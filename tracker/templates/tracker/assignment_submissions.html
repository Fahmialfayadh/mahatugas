{% extends "tracker/base.html" %}

{% block content %}
<h2>{{ assignment.title }} â€” Submissions</h2>

{% if edit_mode %}
<a href="{% url 'submission_create' %}?assignment={{ assignment.assignment_id }}" 
   class="btn btn-success mb-3">+ Add Submission</a>
{% endif %}

<table class="table table-dark table-striped">
    <thead>
        <tr>
            <th>Student</th>
            <th>Score</th>
            <th>Submitted At</th>
            <th>File</th>
            {% if edit_mode %}
                <th>Actions</th>
            {% endif %}
        </tr>
    </thead>

    <tbody>
        {% for s in submissions %}
        <tr>
            <td>{{ s.student.name }}</td>
            <td>{{ s.score }}</td>
            <td>{{ s.submitted_at }}</td>

            <td>
                {% if s.file_path %}
                    <a href="{{ s.file_path.url }}" class="btn btn-primary btn-sm" target="_blank">Open</a>
                {% else %}
                    <span class="text-secondary">No File</span>
                {% endif %}
            </td>

            {% if edit_mode %}
            <td>
                <a href="{% url 'submission_edit' s.submission_id %}" class="btn btn-info btn-sm">Edit</a>
                <a href="{% url 'submission_delete' s.submission_id %}" class="btn btn-danger btn-sm">Delete</a>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>

<a href="{% url 'course_detail' assignment.course_id %}" class="btn btn-secondary mt-3">Back to Course</a>

{% endblock %}
